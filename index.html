<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SISTEMA ELITE SINOP V26</title>
    <style>
        :root { --bg: #05070a; --card: #111827; --primary: #2563eb; --good: #10b981; --bad: #ef4444; --gold: #f59e0b; --border: #374151; }
        * { box-sizing: border-box; font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 0; }
        body { background: var(--bg); color: #fff; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        header { background: #000; padding: 12px; border-bottom: 3px solid var(--primary); display: flex; justify-content: space-between; align-items: center; }
        .idx-tag { background: #1f2937; padding: 6px 10px; border-radius: 6px; font-size: 11px; border: 1px solid var(--gold); color: var(--gold); font-weight: bold; margin-right: 5px; }

        main { flex: 1; padding: 15px; overflow-y: auto; padding-bottom: 180px; }
        .busca-master { width: 100%; padding: 18px; border-radius: 12px; border: 3px solid var(--primary); background: #000; color: #fff; font-size: 18px; font-weight: bold; margin-bottom: 20px; box-shadow: 0 0 15px rgba(37, 99, 235, 0.3); }

        .card { background: var(--card); border-radius: 12px; padding: 16px; border: 2px solid var(--border); margin-bottom: 15px; position: relative; }
        .card-prod { border-left: 8px solid var(--primary); }
        .card-obj { border-left: 8px solid var(--gold); }
        
        /* BOT√ïES ALTO CONTRASTE */
        .btn { padding: 12px; border: none; border-radius: 8px; font-weight: 900; cursor: pointer; text-transform: uppercase; font-size: 11px; text-align: center; color: #ffffff !important; transition: 0.2s; }
        .btn-blue { background: #2563eb; } /* Azul S√≥lido */
        .btn-green { background: #059669; } /* Verde S√≥lido */
        .btn-red { background: #dc2626; } /* Vermelho S√≥lido */
        .btn-gold { background: #f59e0b; color: #000 !important; } /* Amarelo S√≥lido */

        .label-f { display: block; font-size: 10px; color: var(--gold); font-weight: bold; margin-bottom: 4px; text-transform: uppercase; }
        input, textarea { width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #4b5563; background: #000; color: #fff; margin-bottom: 10px; font-size: 14px; }

        .modal { position: fixed; inset: 0; background: #000; z-index: 2000; display: none; padding: 20px; overflow-y: auto; }
        .footer { position: fixed; bottom: 0; width: 100%; background: #000; padding: 15px; border-top: 3px solid var(--primary); display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; z-index: 1000; }
        
        .calc-box { background: rgba(239, 68, 68, 0.1); border: 1px solid var(--bad); padding: 10px; border-radius: 8px; margin-top: 10px; font-size: 12px; color: #fca5a5; }
    </style>
</head>
<body>

<div id="login" style="position:fixed; inset:0; background:#000; z-index:5000; display:flex; align-items:center; justify-content:center; padding:20px;">
    <div class="card" style="width:100%; max-width:350px; text-align:center;">
        <h2 style="color:var(--primary); margin-bottom:20px;">ELITE SINOP V26</h2>
        <input type="text" id="uIn" placeholder="Corretor">
        <input type="password" id="pIn" placeholder="Senha">
        <button onclick="login()" class="btn btn-blue" style="width:100%; padding:15px;">ACESSAR PAINEL</button>
    </div>
</div>

<header>
    <div style="display:flex; overflow-x:auto;" id="indices"></div>
    <button onclick="abrir('adm')" class="btn btn-gold" id="btnAdm" style="display:none;">GESTOR ‚öôÔ∏è</button>
</header>

<main>
    <input type="text" id="busca" class="busca-master" placeholder="Busque: SPC, MAGGI, AGRO, CARO..." oninput="pesquisar(this.value)">
    <div id="feed"></div>
</main>

<div id="adm" class="modal">
    <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
        <h2>‚öôÔ∏è CENTRAL DE CONTROLE</h2>
        <button onclick="fechar('adm')" class="btn btn-red">SAIR</button>
    </div>
    
    <div class="card" style="border-color: var(--primary);">
        <h3 id="tProd">Gerenciar Produto</h3>
        <input type="hidden" id="idxP" value="-1">
        <input type="text" id="p1" placeholder="Nome (Ex: Morada Brasil)">
        <input type="text" id="p2" placeholder="Regi√£o (Ex: Andr√© Maggi)">
        <input type="text" id="pk" placeholder="Gatilhos (spc, maggi, pronto)">
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
            <input type="number" id="p3" placeholder="Valor Total">
            <input type="number" id="p4" placeholder="M¬≤">
            <input type="text" id="p5" placeholder="Entrada">
            <input type="text" id="p6" placeholder="Parcela">
            <input type="text" id="p7" placeholder="Reajuste">
            <input type="text" id="p8" placeholder="Prazo">
        </div>
        <button onclick="salvarP()" class="btn btn-green" style="width:100%">SALVAR ALTERA√á√ïES</button>
        <div id="listP" style="margin-top:15px;"></div>
    </div>
    <button onclick="exportar()" class="btn btn-blue" style="width:100%; padding:20px; margin-top:10px;">üíæ AUTO-BUILD (GERAR NOVO HTML)</button>
</div>

<div id="propModal" class="modal">
    <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
        <h2>üìù FORMALIZAR PROPOSTA</h2>
        <button onclick="fechar('propModal')" class="btn btn-red">X</button>
    </div>
    <input type="text" id="cNome" placeholder="Nome do Cliente">
    <input type="text" id="cLote" placeholder="Quadra e Lote">
    <input type="text" id="cRef" placeholder="Refer√™ncias">
    <div id="propPreview" style="background:#000; padding:15px; border-radius:8px; font-size:13px; border:1px solid var(--good); white-space: pre-wrap;"></div>
    <button onclick="copiarProp()" class="btn btn-green" style="width:100%; margin-top:15px; padding:15px;">COPIAR PARA WHATSAPP</button>
</div>

<div class="footer">
    <button class="btn btn-blue" onclick="copiarDocs()">üìÇ DOCS</button>
    <button class="btn btn-green" onclick="abrirProposta()">üìù PROP</button>
    <button class="btn btn-red" onclick="limpar()">üßπ LIMP</button>
    <button id="btnVoz" class="btn btn-blue" style="grid-column: span 3; background: #3b82f6;" onclick="falar()">üéôÔ∏è ESCUTA ATIVA</button>
</div>

<script>
    let db = {
        prods: [
            {nome: "CEDROS JARDINS", reg: "Posto B√∫falo", preco: 145000, area: 200, ent: "SEM ENTRADA", parc: "753,00", reaj: "IGP-M", prazo: "Pronto", keys: "spc, cedros, bufalo"},
            {nome: "GRAN CAN√ÅRIO", reg: "MT-140", preco: 98000, area: 250, ent: "Facilitada", parc: "595,00", reaj: "IPCA", prazo: "Lan√ßamento", keys: "agro, canario, fasipe"},
            {nome: "MORADA BRASIL", reg: "Andr√© Maggi", preco: 170000, area: 300, ent: "SEM ENTRADA", parc: "713,00", reaj: "IGP-M", prazo: "Lan√ßamento", keys: "maggi, morada, andre"},
            {nome: "CASA PRONTA", reg: "Planejado", preco: 240000, area: 180, ent: "R$ 1.500", parc: "699,00", reaj: "TR", prazo: "Pronta", keys: "sinal, casa, pronta"}
        ],
        objs: [
            {k: "caro", t: "OBJE√á√ÉO: PRE√áO", l: "O valor da parcela n√£o encaixou?", m: "Sinop valoriza 18% ao ano. Adiar custa caro.", a: "Reserve agora ou pague 18% a mais em 12 meses."},
            {k: "esposa", t: "OBJE√á√ÉO: C√îNJUGE", l: "Ela costuma decidir investimentos?", m: "Patrim√¥nio em Sinop √© seguran√ßa familiar.", a: "Garante o lote sem entrada, se ela n√£o quiser, cancelamos."}
        ],
        lastProd: null
    };

    function login() {
        if(document.getElementById('uIn').value === 'admin' && document.getElementById('pIn').value === '123') {
            document.getElementById('login').style.display='none';
            document.getElementById('btnAdm').style.display='block';
            renderIndices(); atualizarListas();
        } else alert("Dados incorretos!");
    }

    function renderIndices() {
        document.getElementById('indices').innerHTML = `<div class="idx-tag">SELIC: 11.25%</div><div class="idx-tag">IPCA: 4.5%</div><div class="idx-tag">VALORIZA√á√ÉO: 18% A.A.</div>`;
    }

    function pesquisar(v) {
        const t = v.toLowerCase(); const f = document.getElementById('feed'); f.innerHTML = ""; if(t.length < 2) return;
        db.prods.forEach(p => {
            if(p.keys.includes(t) || p.nome.toLowerCase().includes(t)) {
                db.lastProd = p;
                const m2 = p.preco / p.area;
                const perda = (p.preco * 0.18) / 12;
                f.innerHTML += `<div class="card card-prod"><h3>üìç ${p.nome}</h3><p style="font-size:11px; opacity:0.8">${p.reg}</p><div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px; background:#000; padding:10px; border-radius:8px;"><div><span class="label-f">M¬≤</span><b>R$ ${m2.toFixed(2)}</b></div><div><span class="label-f">PARCELA</span><b>R$ ${p.parc}</b></div><div><span class="label-f">ENTRADA</span><b>${p.ent}</b></div><div><span class="label-f">PRAZO</span><b>${p.prazo}</b></div></div><div class="calc-box">üìâ Procrastinar te custa <b>R$ ${perda.toLocaleString('pt-BR')}</b> de valoriza√ß√£o este m√™s.</div></div>`;
            }
        });
        db.objs.forEach(o => {
            if(o.k.includes(t)) { f.innerHTML += `<div class="card card-obj"><strong>${o.t}</strong><div style="color:#6ee7b7; margin-top:5px;">üü¢ ${o.l}</div><div style="color:#93c5fd; margin-top:5px;">üîµ ${o.m}</div><div style="color:#fcd34d; margin-top:5px;">üî¥ ${o.a}</div></div>`; }
        });
    }

    function salvarP() {
        const i = parseInt(document.getElementById('idxP').value);
        const p = { nome: document.getElementById('p1').value, reg: document.getElementById('p2').value, keys: document.getElementById('pk').value, preco: document.getElementById('p3').value, area: document.getElementById('p4').value, ent: document.getElementById('p5').value, parc: document.getElementById('p6').value, reaj: document.getElementById('p7').value, prazo: document.getElementById('p8').value };
        if(i === -1) db.prods.push(p); else db.prods[i] = p;
        document.getElementById('idxP').value = "-1"; atualizarListas(); alert("Salvo!");
    }

    function editP(i) {
        const p = db.prods[i];
        document.getElementById('p1').value=p.nome; document.getElementById('p2').value=p.reg; document.getElementById('p3').value=p.preco; document.getElementById('p4').value=p.area; document.getElementById('p5').value=p.ent; document.getElementById('p6').value=p.parc; document.getElementById('p7').value=p.reaj; document.getElementById('p8').value=p.prazo; document.getElementById('pk').value=p.keys; document.getElementById('idxP').value=i;
    }

    function atualizarListas() {
        document.getElementById('listP').innerHTML = db.prods.map((x,i) => `<div style="display:flex; justify-content:space-between; padding:10px; background:#000; border-radius:8px; margin-top:5px;"><span>${x.nome}</span><div><button onclick="editP(${i})" class="btn btn-gold" style="padding:5px">EDIT</button><button onclick="db.prods.splice(${i},1);atualizarListas()" class="btn btn-red" style="padding:5px; margin-left:5px;">X</button></div></div>`).join('');
    }

    function abrirProposta() {
        if(!db.lastProd) { alert("Selecione um produto primeiro!"); return; }
        abrir('propModal');
        document.getElementById('propPreview').innerText = `PROPOSTA: ${db.lastProd.nome}\nREGI√ÉO: ${db.lastProd.reg}\nENTRADA: ${db.lastProd.ent}\nPARCELA: ${db.lastProd.parc}\nREAJUSTE: ${db.lastProd.reaj}`;
    }

    function copiarProp() {
        const texto = `üìù *PROPOSTA FORMAL - SINOP*\n\nCLIENTE: ${document.getElementById('cNome').value}\nLOCAL: ${db.lastProd.nome}\nLOTE: ${document.getElementById('cLote').value}\nENTRADA: ${db.lastProd.ent}\nPARCELA: ${db.lastProd.parc}\nREAJUSTE: ${db.lastProd.reaj}\nREF: ${document.getElementById('cRef').value}\n\n*Valores sujeitos a altera√ß√£o de tabela.*`;
        navigator.clipboard.writeText(texto); alert("Proposta copiada para o WhatsApp!");
    }

    function copiarDocs() { navigator.clipboard.writeText("üìÇ *DOCS PARA FECHAMENTO:*\n1. RG e CPF\n2. Comprovante de Resid√™ncia\n3. Comprovante de Renda\n4. Certid√£o de Nascimento/Casamento\n5. 3 Refer√™ncias Pessoais"); alert("Lista de documentos copiada!"); }
    function exportar() { let h = document.documentElement.outerHTML; h = h.replace(/let db = \{[\s\S]*?\};/, `let db = ${JSON.stringify(db, null, 4)};`); const b = new Blob(["<!DOCTYPE html>\n"+h], {type:"text/html"}); const a = document.createElement("a"); a.href = URL.createObjectURL(b); a.download = "sistema_elite_backup.html"; a.click(); }
    function abrir(id) { document.getElementById(id).style.display='block'; }
    function fechar(id) { document.getElementById(id).style.display='none'; }
    function limpar() { document.getElementById('busca').value=''; pesquisar(''); db.lastProd = null; }

    function falar() {
        const r = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        r.lang = 'pt-BR'; r.onresult = (e) => { document.getElementById('busca').value = e.results[0][0].transcript; pesquisar(document.getElementById('busca').value); }; r.start();
    }
</script>
</body>
</html>
