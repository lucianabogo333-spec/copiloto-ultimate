<!DOCTYPE html>
<html lang="pt-BR" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>COPILOTO ‚Äî Assistente de Obje√ß√µes em Tempo Real</title>

<style>
/* ===================== THEME ===================== */
:root{
  --bg:#f6f7fb;
  --panel:#ffffff;
  --text:#0b1220;
  --muted:#5b6474;
  --border:#e5e7eb;
  --shadow:0 14px 34px rgba(17,24,39,.10);
  --shadow2:0 8px 22px rgba(17,24,39,.08);
  --primary:#4c5bd4;
  --primary2:#3f4bd0;
  --ring:rgba(76,91,212,.22);
  --good:#16a34a;
  --warn:#f59e0b;
  --bad:#ef4444;
  --chip:#f3f4f6;
  --radius:16px;
  --radius2:22px;
  --tap:48px;
}

[data-theme="dark"]{
  --bg:#0b1220;
  --panel:#0f172a;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --border:#1f2937;
  --shadow:0 14px 34px rgba(0,0,0,.45);
  --shadow2:0 8px 22px rgba(0,0,0,.35);
  --chip:#111827;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,Arial;
  background:var(--bg);
  color:var(--text);
}

/* ===================== BASIC ===================== */
button{
  min-height:var(--tap);
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:var(--panel);
  font-weight:800;
  cursor:pointer;
}
.primary{
  background:linear-gradient(180deg,var(--primary),var(--primary2));
  color:#fff;border:none;
}
.ghost{
  background:rgba(76,91,212,.08);
  border-color:rgba(76,91,212,.22);
  color:#1f2a9a;
}
.danger{
  background:rgba(239,68,68,.10);
  color:#7f1d1d;
  border-color:rgba(239,68,68,.22);
}
.card{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:14px;
  box-shadow:var(--shadow2);
}
.chip{
  padding:6px 10px;
  border-radius:999px;
  background:var(--chip);
  font-size:12px;
  font-weight:700;
}
header{
  position:sticky;top:0;z-index:5;
  background:rgba(255,255,255,.85);
  backdrop-filter:blur(10px);
  border-bottom:1px solid var(--border);
}
[data-theme="dark"] header{background:rgba(15,23,42,.9)}
.topbar{
  max-width:1200px;margin:auto;
  display:flex;justify-content:space-between;
  padding:14px;gap:10px;
}
main{max-width:1200px;margin:auto;padding:16px}
.grid{
  display:grid;
  grid-template-columns:320px 1fr 430px;
  gap:16px;
}
@media(max-width:980px){
  .grid{grid-template-columns:1fr}
}

/* ===================== MODALS ===================== */
.overlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,.6);
  display:flex;align-items:center;justify-content:center;
  z-index:20;
}
.modal{
  background:var(--panel);
  padding:20px;
  border-radius:22px;
  width:min(420px,100%);
}
.modal h2{margin-top:0}

/* ===================== INPUT ===================== */
textarea,input{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
  background:var(--panel);
  color:var(--text);
}

/* ===================== TOAST ===================== */
.toast{
  position:fixed;bottom:16px;right:16px;
  background:#111;color:#fff;
  padding:12px 14px;
  border-radius:14px;
  display:none;
}
.toast.show{display:block}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginOverlay" class="overlay">
  <div class="modal">
    <h2>Entrar no COPILOTO</h2>
    <input id="loginUser" placeholder="login">
    <input id="loginPass" type="password" placeholder="senha" style="margin-top:8px">
    <button class="primary" onclick="doLogin()" style="margin-top:12px;width:100%">Entrar</button>
    <div id="loginError" style="color:#ef4444;margin-top:8px;display:none">Login inv√°lido</div>
  </div>
</div>

<!-- THEME CHOICE -->
<div id="themeOverlay" class="overlay" style="display:none">
  <div class="modal">
    <h2>Escolha o tema</h2>
    <p>Qual tema voc√™ prefere usar agora?</p>
    <div style="display:flex;gap:10px;margin-top:14px">
      <button class="ghost" onclick="setTheme('light')">‚òÄÔ∏è Claro</button>
      <button class="ghost" onclick="setTheme('dark')">üåô Escuro</button>
    </div>
  </div>
</div>

<header>
  <div class="topbar">
    <strong>COPILOTO</strong>
    <div style="display:flex;gap:8px">
      <button id="proposalBtn" class="ghost" onclick="openProposal()" style="display:none">üìÑ Formaliza√ß√£o</button>
      <button id="logoutBtn" class="danger" onclick="logout()" style="display:none">Sair</button>
    </div>
  </div>
</header>

<main>
  <div class="grid">

    <!-- PRODUTO -->
    <div class="card">
      <strong id="prodName">Produto n√£o identificado</strong>
      <ul id="prodInfo"></ul>
    </div>

    <!-- INPUT -->
    <div class="card">
      <textarea id="input" placeholder="Digite a fala do cliente..."></textarea>
    </div>

    <!-- RESPOSTAS -->
    <div>
      <div class="card"><strong>Quebra Leve</strong><p id="r1">‚Äî</p></div>
      <div class="card"><strong>Quebra M√©dia</strong><p id="r2">‚Äî</p></div>
      <div class="card"><strong>Quebra Agressiva</strong><p id="r3">‚Äî</p></div>

      <!-- CALCULADORA -->
      <div class="card">
        <strong>Calculadora de Procrastina√ß√£o</strong>
        <input id="pcValor" placeholder="Valor base R$">
        <input id="pcDias" placeholder="Dias adiando" style="margin-top:6px">
        <input id="pcReaj" placeholder="Reajuste mensal %" style="margin-top:6px">
        <button class="primary" onclick="calcPro()" style="margin-top:8px">Calcular</button>
        <pre id="pcOut">‚Äî</pre>
      </div>
    </div>

  </div>
</main>

<div id="toast" class="toast">OK</div>

<script>
/* ===================== BASE ===================== */
const base={
  products:[
    {name:"CEDROS JARDINS",keys:["cedros","b√∫falo"],info:["200m¬≤","Parcelas R$753","Sem entrada"]}
  ],
  objections:[
    {keys:["caro","pre√ßo"],a:"Entendo.",b:"Comparado com o qu√™?",c:"Se ajustar, fecha?"}
  ],
  users:[{login:"vendedor",pass:"1234"}]
};

let currentUser=null;

/* ===================== LOGIN ===================== */
function doLogin(){
  const u=loginUser.value.trim();
  const p=loginPass.value.trim();
  if(u==="edson"&&p==="2026"){
    currentUser={login:"edson",role:"admin"};
  }else{
    const f=base.users.find(x=>x.login===u&&x.pass===p);
    if(!f){loginError.style.display="block";return}
    currentUser={login:u,role:"user"};
  }
  loginOverlay.style.display="none";
  themeOverlay.style.display="flex";
}
function logout(){
  currentUser=null;
  loginOverlay.style.display="flex";
  proposalBtn.style.display="none";
  logoutBtn.style.display="none";
}
function setTheme(t){
  document.documentElement.setAttribute("data-theme",t);
  themeOverlay.style.display="none";
  proposalBtn.style.display="inline-flex";
  logoutBtn.style.display="inline-flex";
}

/* ===================== FORMALIZA√á√ÉO ===================== */
function openProposal(){
  window.open("https://lucianabogo333-spec.github.io/formalizacao-proposta/","_blank");
}

/* ===================== CORE ===================== */
input.addEventListener("input",()=>{
  const t=input.value.toLowerCase();
  const p=base.products.find(p=>p.keys.some(k=>t.includes(k)));
  if(p){
    prodName.textContent=p.name;
    prodInfo.innerHTML=p.info.map(i=>"<li>"+i+"</li>").join("");
  }
  const o=base.objections.find(o=>o.keys.some(k=>t.includes(k)));
  if(o){
    r1.textContent=o.a;
    r2.textContent=o.b;
    r3.textContent=o.c;
  }
});

/* ===================== CALC ===================== */
function calcPro(){
  const v=Number(pcValor.value||0);
  const d=Number(pcDias.value||0);
  const r=Number(pcReaj.value||0)/100/30;
  const vf=v*Math.pow(1+r,d);
  pcOut.textContent=`Valor hoje: R$ ${v}\nAp√≥s ${d} dias: R$ ${vf.toFixed(2)}\nCusto da demora: R$ ${(vf-v).toFixed(2)}`;
}
</script>
</body>
</html>
