<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>COPILOTO ‚Äî Assistente de Obje√ß√µes em Tempo Real</title>

<style>
/* ======================================================
   DESIGN SYSTEM ‚Äî SaaS MODERNO
====================================================== */
:root{
  --bg:#f6f7fb;
  --panel:#ffffff;
  --text:#0f172a;
  --muted:#475569;
  --border:#e5e7eb;

  --primary:#4c5bd4;
  --primary2:#3f4bd0;
  --ring:rgba(76,91,212,.35);

  --good:#16a34a;
  --warn:#f59e0b;
  --bad:#ef4444;

  --radius:18px;
  --radius-lg:22px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* ======================================================
   HEADER
====================================================== */
header{
  position:sticky;
  top:0;
  z-index:10;
  background:#fff;
  border-bottom:1px solid var(--border);
}
.topbar{
  max-width:1200px;
  margin:auto;
  padding:14px 18px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:14px;
}
.brand h1{
  margin:0;
  font-size:20px;
  font-weight:900;
}
.brand span{
  font-size:13px;
  color:var(--muted);
}
.statusline{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}
.pill{
  padding:8px 12px;
  font-size:12px;
  border-radius:999px;
  border:1px solid var(--border);
  background:#fff;
  font-weight:700;
}
.pill.good{background:rgba(22,163,74,.12);border-color:rgba(22,163,74,.3);color:#065f46}

/* ======================================================
   LAYOUT
====================================================== */
main{
  max-width:1200px;
  margin:auto;
  padding:18px;
}
.grid{
  display:grid;
  grid-template-columns:320px 1fr 420px;
  gap:18px;
}
@media(max-width:980px){
  .grid{grid-template-columns:1fr}
}

/* ======================================================
   CARDS
====================================================== */
.card{
  background:#fff;
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:0 12px 28px rgba(0,0,0,.06);
  overflow:hidden;
}
.card .head{
  padding:16px;
  border-bottom:1px solid var(--border);
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:10px;
}
.card .body{padding:16px}
.subtitle{
  margin-top:4px;
  font-size:13px;
  color:var(--muted);
  line-height:1.4;
}

/* ======================================================
   PRODUTO
====================================================== */
.productName{
  font-size:22px;
  font-weight:900;
}
.infoList{padding-left:18px}
.infoList li{
  font-size:15px;
  margin:6px 0;
}

/* ======================================================
   INPUT
====================================================== */
textarea{
  width:100%;
  min-height:220px;
  padding:18px;
  font-size:17px;
  line-height:1.6;
  border-radius:16px;
  border:1px solid var(--border);
}
textarea:focus{
  outline:none;
  border-color:var(--primary);
  box-shadow:0 0 0 5px var(--ring);
}

/* ======================================================
   BOT√ïES
====================================================== */
button{
  padding:14px 18px;
  font-size:15px;
  font-weight:800;
  border-radius:14px;
  border:1px solid var(--border);
  background:#fff;
  cursor:pointer;
}
.primary{
  background:linear-gradient(180deg,var(--primary),var(--primary2));
  color:#fff;
  border:none;
}
.danger{
  background:rgba(239,68,68,.12);
  border-color:rgba(239,68,68,.3);
  color:#7f1d1d;
}
.ghost{
  background:rgba(76,91,212,.08);
  border-color:rgba(76,91,212,.25);
  color:#1e293b;
}

/* ======================================================
   RESPOSTAS
====================================================== */
.responseText{
  font-size:17px;
  line-height:1.65;
  white-space:pre-wrap;
}

/* ======================================================
   EFEITOS FORTES DE ATUALIZA√á√ÉO
====================================================== */
.fxUpdate{
  animation:updatePulse .85s ease-out;
}
@keyframes updatePulse{
  0%{
    box-shadow:0 0 0 0 rgba(76,91,212,0);
    background:#fff;
    transform:translateY(0);
  }
  35%{
    box-shadow:0 0 0 12px rgba(76,91,212,.28);
    background:rgba(76,91,212,.05);
    transform:translateY(-4px);
  }
  100%{
    box-shadow:0 0 0 0 rgba(76,91,212,0);
    background:#fff;
    transform:translateY(0);
  }
}

/* ======================================================
   LOGIN
====================================================== */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(15,23,42,.65);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:50;
}
.modal{
  background:#fff;
  width:min(460px,100%);
  border-radius:22px;
  padding:26px;
}
.modal h1{
  margin:0;
  font-size:24px;
  font-weight:900;
}
input{
  width:100%;
  padding:14px;
  font-size:16px;
  border-radius:14px;
  border:1px solid var(--border);
  margin-top:10px;
}

/* ======================================================
   MOBILE
====================================================== */
@media(max-width:600px){
  .productName{font-size:24px}
  .responseText{font-size:18px}
  button{width:100%}
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginOverlay" class="overlay">
  <div class="modal">
    <h1>Entrar no COPILOTO</h1>
    <p class="subtitle">Acesso restrito</p>

    <input id="loginUser" type="text" placeholder="Login">
    <input id="loginPass" type="password" placeholder="Senha">

    <label style="display:flex;align-items:center;gap:8px;margin-top:12px;font-size:14px">
      <input type="checkbox" id="rememberMe">
      Salvar neste dispositivo
    </label>

    <p id="loginError" class="subtitle" style="color:#b91c1c;display:none;margin-top:10px">
      Login ou senha inv√°lidos
    </p>

    <button class="primary" style="margin-top:18px;width:100%" onclick="doLogin()">Entrar</button>
  </div>
</div>

<header>
  <div class="topbar">
    <div class="brand">
      <h1>COPILOTO</h1>
      <span>Assistente de Obje√ß√µes em Tempo Real</span>
    </div>
    <div class="statusline">
      <span class="pill" id="rolePill">Acesso: ‚Äî</span>
    </div>
  </div>
</header>

<main>
<div class="grid">

<!-- PRODUTO -->
<aside class="card" id="productCard">
  <div class="head">
    <div>
      <h3>Produto ativo</h3>
      <p class="subtitle">Detectado por palavras e informa√ß√µes</p>
    </div>
  </div>
  <div class="body">
    <div class="productName" id="prodName">Produto n√£o identificado</div>
    <ul class="infoList" id="prodInfo"></ul>
  </div>
</aside>

<!-- INPUT -->
<section class="card" id="inputCard">
  <div class="head">
    <div>
      <h3>Fala do cliente</h3>
      <p class="subtitle">Digite ou dite ‚Äî limpa automaticamente</p>
    </div>
  </div>
  <div class="body">
    <textarea id="input" placeholder="Digite ou dite o que o cliente disse..."></textarea>
    <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap">
      <button class="ghost" onclick="toggleListening()">üéôÔ∏è Microfone</button>
      <button class="danger" onclick="clearAll()">Limpar</button>
    </div>
  </div>
</section>

<!-- RESPOSTAS -->
<section class="card" id="responsesCard">
  <div class="head">
    <h3>Respostas</h3>
  </div>
  <div class="body">
    <p id="r1" class="responseText">‚Äî</p>
    <p id="r2" class="responseText">‚Äî</p>
    <p id="r3" class="responseText">‚Äî</p>
  </div>
</section>

</div>
</main>

<script>
/* ======================================================
   BASE ORIGINAL ‚Äî PERGUNTAS E RESPOSTAS
====================================================== */
const DEFAULT_BASE = {
  objections: [
    {
      keys:["caro","muito caro","pre√ßo alto","valor alto"],
      a:"Entendo totalmente. S√≥ pra eu te orientar certo: quando voc√™ diz caro, √© pelo valor total ou pela parcela?",
      b:"Caro comparado com qual op√ß√£o? Se for condi√ß√£o, eu consigo ajustar.",
      c:"Se eu encaixar pra caber no seu bolso, voc√™ avan√ßa agora?"
    },
    {
      keys:["vou pensar","analisar","ver depois"],
      a:"Perfeito, pensar √© o certo. O que voc√™ quer analisar primeiro?",
      b:"O que precisa acontecer pra virar um sim?",
      c:"Se nada mudar, sua resposta tende mais pra sim ou n√£o?"
    }
  ]
};

/* ======================================================
   LOGIN
====================================================== */
const ADMIN={login:"edson",pass:"2026"};
const LS_SESSION="copiloto_session";
let currentUser=null;

function doLogin(){
  const u=loginUser.value.trim();
  const p=loginPass.value.trim();
  loginError.style.display="none";

  if(u===ADMIN.login && p===ADMIN.pass){
    currentUser={login:u};
    const store=rememberMe.checked?localStorage:sessionStorage;
    store.setItem(LS_SESSION,JSON.stringify(currentUser));
    afterLogin();
    return;
  }
  loginError.style.display="block";
}

function afterLogin(){
  loginOverlay.style.display="none";
  rolePill.textContent="Acesso: "+currentUser.login;
}

(function init(){
  const s=localStorage.getItem(LS_SESSION)||sessionStorage.getItem(LS_SESSION);
  if(s){
    currentUser=JSON.parse(s);
    afterLogin();
  }
})();

/* ======================================================
   CORE SIMPLIFICADO (MATCH)
====================================================== */
const input=document.getElementById("input");
const r1=document.getElementById("r1");
const r2=document.getElementById("r2");
const r3=document.getElementById("r3");
const responsesCard=document.getElementById("responsesCard");

input.addEventListener("input",()=>{
  const t=input.value.toLowerCase();
  const o=DEFAULT_BASE.objections.find(o=>o.keys.some(k=>t.includes(k)));
  if(o){
    r1.textContent=o.a;
    r2.textContent=o.b;
    r3.textContent=o.c;
    responsesCard.classList.add("fxUpdate");
    setTimeout(()=>responsesCard.classList.remove("fxUpdate"),900);
  }
  setTimeout(()=>input.value="",900);
});

function clearAll(){
  input.value="";
  r1.textContent=r2.textContent=r3.textContent="‚Äî";
}

/* ======================================================
   MICROFONE MANUAL
====================================================== */
let rec=null;
function toggleListening(){
  if(!('webkitSpeechRecognition'in window)){
    alert("Navegador n√£o suporta microfone");
    return;
  }
  rec=new webkitSpeechRecognition();
  rec.lang="pt-BR";
  rec.onresult=e=>{
    input.value=e.results[0][0].transcript;
    input.dispatchEvent(new Event("input"));
  };
  rec.start();
}
</script>

</body>
</html>
